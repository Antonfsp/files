\documentclass{article}
\usepackage{amsmath,amssymb}
\usepackage[nocomma]{optidef}

\begin{document}

\textbf{Unplitable demands maximizing revenue associated to delivered demands}

\begin{maxi!}{}{\sum_{(o,t,i) \in \Theta} \left[\sum_{e \in OE(o)}  f_e^{(o,t,i)} \cdot d_{(o,t,i)} \cdot r - \sum_{\substack{e=(v,w,j) \in E \colon  \\ j \not = i}} f_{(v,w,j)}^{(o,t,i)} \cdot \frac{c_e}{q_e}\right]}{}{}
\addConstraint{\sum_{e \in IE(z)} f_e^{(o,t,i)}-\sum_{e' \in OE(z)} f_{e'}^{(o,t,i)}}{=0,\quad \label{eq:FullCooperationB1}}{\forall\ z\in V\setminus\{o,t\},\ \forall (o,t,i)\in\Theta}
\addConstraint{\sum_{e \in OE(o)} f_e^{(o,t,i)}}{\leq d_{(o,t,i)},\quad \label{eq:FullCooperationC1}}{\forall\ (o,t,i)\in \Theta}
\addConstraint{\sum_{e \in OE(t)} f_e^{(o,t,i)}}{= 0,\quad \label{eq:FullCooperationD1}}{\forall\ (o,t,i)\in \Theta}
\addConstraint{\sum_{(o,t,i) \in \Theta} f_e^{(o,t,i)}}{\leq q_e^*,\quad \label{eq:FullCooperationE1}}{\forall\ e \in E}
\addConstraint{\sum_{v \in S} \sum_{w \in S} f_{(v,w)}^d}{\leq |S| -1,\quad \label{eq:FullCooperationF1}}{\forall\; S \subset V,\ \forall\; d \in \Theta}
\addConstraint{f_e^{(o,t,i)}}{\in \mathbb{N}_0,\quad \label{eq:FullCooperationG1}}{\forall\ e \in E,\ \forall (o,t,i)\in \Theta}
\end{maxi!}



Constraint (\ref{eq:FullCooperationE1}) ensures that the commoditiese sent through an edge doesn't exceed the total capacity available in that edge (the sum of the capacities each agent has for that edge).

Constraint (\ref{eq:FullCooperationF1}) is a subtour elimination constraint.

In this model, $e \in E$ is a tuple (v,w,i) for $v,w\ \in N$ and $i \in N$ (multiple agents can have an active edge between the same two nodes).




\pagebreak

\textbf{Unsplitable demand maximizing demands served}

\begin{maxi!}{}{\sum_{(o,t,i) \in \Theta} \sum_{e \in OE(o)}  f_e^{(o,t,i)} \cdot d_{(o,t,i)} \cdot r}{}{}
\addConstraint{\sum_{e \in IE(z)} f_e^{(o,t,i)}-\sum_{e' \in OE(z)} f_{e'}^{(o,t,i)}}{=0,\quad \label{eq:FullCooperationB}}{\forall\ z\in V\setminus\{o,t\},\ \forall (o,t,i)\in\Theta}
\addConstraint{\sum_{e \in OE(o)} f_e^{(o,t,i)}}{\leq d_{(o,t,i)},\quad \label{eq:FullCooperationC}}{\forall\ (o,t,i)\in \Theta}
\addConstraint{\sum_{e \in OE(t)} f_e^{(o,t,i)}}{= 0,\quad \label{eq:FullCooperationD}}{\forall\ (o,t,i)\in \Theta}
\addConstraint{\sum_{(o,t,i) \in \Theta} f_e^{(o,t,i)}}{\leq q_e^*,\quad \label{eq:FullCooperationE}}{\forall\ e \in E}
\addConstraint{\sum_{v \in S} \sum_{w \in S} f_{(v,w)}^d}{\leq |S| -1,\quad \label{eq:FullCooperationF}}{\forall\; S \subset V,\ \forall\; d \in \Theta}
\addConstraint{f_e^{(o,t,i)}}{\in \mathbb{N}_0,\quad \label{eq:FullCooperationG}}{\forall\ e \in E,\ \forall (o,t,i)\in \Theta}
\end{maxi!}


An extra contraint might be added to this model:
\[\sum_{\substack{e=(v,w,j)\\ \in E \colon z\not = i}} f_e^{(o,t,i)}\cdot d_{(o,t,i)} \cdot \frac{c_e}{q_e} \leq\] 
\[\leq \sum_{e\in OE(o)} f_e^{(o,t,i)}\cdot d_{(o,t,i)}\cdot r  +  \sum_{\substack{e=(v,w,j) \in E \colon  \\ j \not = i}} f_{(v,w,j)}^{(o,t,i)} \cdot \frac{c_e}{q_e} \quad \forall\ (o,t,i) \in \Theta \]

This will ensure that any agent get loss from the cooperation. Similar effect to maximize the profit from each commodity

\end{document}